---
title: "01.30.2024 Presentation"
author: "Ethan Weiland"
date: "2024-01-30"
output:
  pdf_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


```{r, include=FALSE}
rm(list=ls())

ipak <- function(pkg){ # Function for installing and loading packages
    new.pkg <- pkg[!(pkg %in% installed.packages()[, "Package"])]
    if (length(new.pkg))
      install.packages(new.pkg, dependencies = TRUE)
    sapply(pkg, require, character.only = TRUE)
  }
packages <- c("tidyverse",
              "stargazer")
ipak(packages)

movies <- read_csv("rotten_tomatoes_movies.csv")

movies <- movies[!is.na(movies$audienceScore),] # removing movies with a NA audience score
movies <- movies[!is.na(movies$tomatoMeter),] # removing movies with a NA critic score
```

## 1. Research Question 

The research question for this project is: What is the association between how critics rate a movie and how general audiences rate a movie? Also, does this relationship vary, if at all, by factors like box office success, genre, and release date? 

## 2. The Data

A fantastic source to answer my research question is the popular website Rotten Tomatoes. Rotten Tomatoes contains information on a plethora of movies, and for each movie it reports a "Tomatometer" (average critic score) and an "Audience Score" (average audience score from verified users). Besides these two main variables of interest, Rotten Tomatoes also contains information on other movie characteristics like rating, release date, box office gross, etc. 

I do not have experience with web scraping, but fortunately a Kaggle user has already scraped Rotten Tomatoes and made the data freely available at the following link:  https://www.kaggle.com/datasets/andrezaza/clapper-massive-rotten-tomatoes-movies-and-reviews/. This data contains information on over 140,000 movies. However, once I remove movies with missing data on either audience score or critic score, this is reduced to **30,323 movies**. The dataset contains the following variables:

  - id = unique identifier for each movie in the dataset (i.e., primary key)
  - title 
  - audienceScore 
  - tomatoMeter = average critic score
  - rating 
  - ratingContents = why a movie is rated the way that it is
  - releaseDateTheaters 
  - releaseDateStreaming 
  - runtimeMinutes 
  - genre 
  - originalLanguage 
  - director 
  - writer 
  - boxOffice = gross U.S. box office
  - distributor 
  - soundMix (e.g., "Surround", "Dolby")
  
Not every film has information on each of these variables. Table 1 displays the percentage of **non-missing** data on each variable:

```{r, results = "asis", echo=FALSE}
count_non_missing <- function(x) {
  return(sum(!is.na(x)))
}
num_non_missing <- apply(X=movies, MARGIN=2, FUN=count_non_missing)
percent_non_missing <- round(num_non_missing / nrow(movies) * 100, 2)
table1 <- data.frame(names(movies), percent_non_missing)
table1 <- arrange(table1, desc(percent_non_missing))
names(table1) <- c("Variable", "% Non-Missing")
stargazer(table1,
          title="Percentage of Non-Missing Data Among Each Variable",
          summary=FALSE,
          rownames=FALSE,
          header=FALSE,
          digits=2)
```

## 3 Bivariate Association Between Audience Score and Critic Score

The two main variables of interest are audienceScore (average audience score from verified users) and tomatoMeter (average critic score). Table 2 reports the summary statistics of each of these variables and Figure 1 plots their respective distributions.

```{r, results = "asis", echo=FALSE}
descriptive_statistics <- data.frame(Mean = c(mean(movies$tomatoMeter),
                                              mean(movies$audienceScore)),
                                     Median = c(median(movies$tomatoMeter),
                                                median(movies$audienceScore)),
                                     SD = c(sd(movies$tomatoMeter),
                                            sd(movies$audienceScore)))
descriptive_statistics <- round(descriptive_statistics, 2)
rownames(descriptive_statistics) <- c("Critic Score", "Audience Score")
stargazer(descriptive_statistics,
          title="Descriptive Statistics of Critic Score and Audience Score",
          summary=FALSE,
          header=FALSE,
          digits=2)
```

```{r echo=FALSE}
movies %>%
  mutate(Audience = audienceScore, Critic = tomatoMeter) %>%
  pivot_longer(cols = c(Audience, Critic),
               names_to = "Source", 
               values_to = "Score") %>%
  ggplot(aes(x=Score, col=Source)) +
  geom_density() +
  labs(title="Figure 1. Distribution of Scores by Source",
       x="Score",
       y="Density")
  
```

The respective distributions of audience score and critic score are somewhat similar. Both sources are slightly left-skewed, with a greater proportion of favorable than unfavorable ratings. However, critic scores are more likely to be very low and very high, while the mode of audience scores is at ~75%. Critic scores also have a greater spread, evidenced by the higher standard deviation value. 

Now, turning to the bivariate relationship between these two variables. Figure 2 plots the association between audience score and critic score, as well as a LOESS smoother to help distinguish the overall pattern.

```{r, echo=FALSE}
ggplot(movies, aes(x=tomatoMeter, y=audienceScore)) +
  geom_point(alpha=0.15) +
  geom_smooth(method="loess", formula="y~x") +
  labs(title="Figure 2. Audience Score vs. Critic Score",
       y="Audience Score",
       x="Critic Score")
```
The sheer amount of movies makes discerning the overall relationship with the naked eye difficult. This is where the LOESS smoother comes in useful. The LOESS smoother (in blue) is remarkably linear across the range of scores. The correlation between these two variables is `r cor(movies$tomatoMeter, movies$audienceScore)`, which indicates a moderate-strong linear relationship. A linear model seems best moving forward, but it will be interesting to see how this relationship changes when controlling for other variables.

One interesting note is that there are more critic scores of 0% and 100% than audience scores of 0% and 100%, respectively.

## 4. Consulting Needs

I anticipate the following consulting needs:


1. Adjusting my research question. I am happy with the general research question exploring the association between audience score and critic score, but I am open to supplementing it with analyses the class thinks are worth pursuing. 

2. Help with Git/Github. One of the skills I want to practice in this project is version control. I have successfully set up the repository on my GitHub (https://github.com/ethanphilipweiland/rotten-tomatoes). I will likely have questions on Git/Github as I work on my project.

3. Text analysis? The Kaggle repository also contains information on 1,400,000 reviews, including the reviews themselves as well as additional information (reviewer, publication, etc.). I have never done any text analysis, but am open to exploring this additional data. 

## 5. Code

The code to produce this document, as well as the Rotten Tomatoes data, is available at https://github.com/ethanphilipweiland/rotten-tomatoes


